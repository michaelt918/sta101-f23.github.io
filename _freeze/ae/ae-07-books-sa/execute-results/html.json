{
  "hash": "2dd19dd1075062eb75d6cce95e2eee4d",
  "result": {
    "markdown": "---\ntitle: \"Weights of books\"\ncategories: \n  - Application exercise\n  - Suggested answers\neditor: visual\n---\n\n\n::: callout-important\nThese are suggested answers for the application exercise. They're not necessarily complete or 100% accurate, they're roughly what we develop in class while going through the exercises.\n:::\n\nToday we'll explore the question \"How do volume and weights books relate?\" and \"How, if at all, does that change when we take whether the book is hardback or paperback into consideration?\"\n\n# Goals\n\n-   Build, fit, and interpret linear models with more than one predictor\n\n-   Use categorical variables as a predictor in a model\n\n-   Compute $R^2$ and use it to select between models\n\n# Packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\nlibrary(DAAG)\n```\n:::\n\n\n# Data\n\nThe data for this application exercise comes from the `allbacks` dataset in the **DAAG** package. The dataset has 15 observations and 4 columns. Each observation represents a book. Let's take a peek at the data:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nallbacks\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   volume area weight cover\n1     885  382    800    hb\n2    1016  468    950    hb\n3    1125  387   1050    hb\n4     239  371    350    hb\n5     701  371    750    hb\n6     641  367    600    hb\n7    1228  396   1075    hb\n8     412    0    250    pb\n9     953    0    700    pb\n10    929    0    650    pb\n11   1492    0    975    pb\n12    419    0    350    pb\n13   1010    0    950    pb\n14    595    0    425    pb\n15   1034    0    725    pb\n```\n\n\n:::\n:::\n\n\nNote that `volume` is measured in cubic centimeters and `weight` is measured in grams. More information on the dataset can be found in the documentation for `allbacks`, with `?allbacks`.\n\n# Single predictor\n\n## Exercise 1\n\nVisualize the relationship between volume (on the x-axis) and weight (on the y-axis). Overlay the line of best fit. Describe the relationship between these variables.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(allbacks, aes(x = volume, y = weight)) +\n  geom_point() +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  labs(\n    x = \"Volume (cubic centimeters)\",\n    y = \"Weight (grams)\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](ae-07-books-sa_files/figure-html/plot-weight-volume-1.png){width=672}\n:::\n:::\n\n\n## Exercise 2\n\nFit a model predicting weight from volume for these books and save it as `weight_fit`. Display a tidy output of the model.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweight_fit <- linear_reg() |>\n  fit(weight ~ volume, data = allbacks)\n\ntidy(weight_fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 5\n  term        estimate std.error statistic    p.value\n  <chr>          <dbl>     <dbl>     <dbl>      <dbl>\n1 (Intercept)  108.      88.4         1.22 0.245     \n2 volume         0.709    0.0975      7.27 0.00000626\n```\n\n\n:::\n:::\n\n\n## Exercise 3\n\nInterpret the slope and the intercept in context of the data.\n\n> -   Intercept: Books with 0 volume are expected, on average, to weigh approximately 107.68 grams. This doesn't make sense in the context of the data, and the intercept is only there to adjust the height of the line on the y-axis.\n>\n> -   Slope: For each additional cubic centimeter the book's volume is larger, we expect the weight to be higher, on average, by 0.71 grams.\n\n## Exercise 4\n\nCalculate the $R^2$ of this model and interpret it in context of the data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglance(weight_fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 12\n  r.squared adj.r.squared sigma statistic    p.value    df logLik   AIC   BIC\n      <dbl>         <dbl> <dbl>     <dbl>      <dbl> <dbl>  <dbl> <dbl> <dbl>\n1     0.803         0.787  124.      52.9 0.00000626     1  -92.5  191.  193.\n# ℹ 3 more variables: deviance <dbl>, df.residual <int>, nobs <int>\n```\n\n\n:::\n:::\n\n\n> Volume explains approximately 80% of the variability in book weights.\n\n# Multiple predictors\n\n## Exercise 5\n\nVisualize the relationship between volume (on the x-axis) and weight (on the y-axis), taking into consideration the cover type of the book. Use different colors and shapes for hardback and paperback books. Also use different colors for lines of best fit for the two types of books. In addition, add the overall line of best fit (from Exercise 1) as a gray dashed line so that you can see the difference between the lines when considering and not considering cover type.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(allbacks, aes(x = volume, y = weight)) +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"gray\", linetype = \"dashed\") +\n  geom_point(aes(color = cover, shape = cover)) +\n  geom_smooth(aes(color = cover), method = \"lm\", se = FALSE) +\n  labs(\n    x = \"Volume (cubic centimeters)\",\n    y = \"Weight (grams)\",\n    shape = \"Cover\", color = \"Cover\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](ae-07-books-sa_files/figure-html/plot-weight-volume-cover-1.png){width=672}\n:::\n:::\n\n\n## Exercise 6\n\nFit a model predicting weight from volume for these books and save it as `weight_cover_fit`. Display a tidy output of the model.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweight_cover_fit <- linear_reg() |>\n  fit(weight ~ volume + cover, data = allbacks)\n\ntidy(weight_cover_fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 5\n  term        estimate std.error statistic      p.value\n  <chr>          <dbl>     <dbl>     <dbl>        <dbl>\n1 (Intercept)  198.      59.2         3.34 0.00584     \n2 volume         0.718    0.0615     11.7  0.0000000660\n3 coverpb     -184.      40.5        -4.55 0.000672    \n```\n\n\n:::\n:::\n\n\n## Exercise 7\n\nIn the model output we have a variable `coverpb`. Why is only the `pb` (paperback) level of the `cover` variable shown? What happened to the `hb` (hardback) level?\n\n> Hardback is the reference level, therefore doesn't show up in the model output.\n\n## Exercise 8\n\nInterpret the slopes and the intercept in context of the data.\n\n> -   Intercept: Books with 0 volume and that are hardback are expected, on average, to weigh approximately 197.96 grams. This doesn't make sense in the context of the data, and the intercept is only there to adjust the height of the line on the y-axis.\n>\n> -   Slope - volume: All else held constant, for each additional cubic centimeter the book's volume is larger, we expect the weight to be higher, on average, by 0.72 grams.\n>\n> -   Slope - cover: All else held constant, paperback books weigh, on average, 184.05 grams lower than harback books.\n\n## Exercise 9\n\nFirst, guess whether the $R^2$ of this model will be greater than, less than, or the same as the previous model, or whether we can't tell. Then, calculate the $R^2$ of this model to confirm your guess, and then interpret it in context of the data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglance(weight_cover_fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 12\n  r.squared adj.r.squared sigma statistic     p.value    df logLik   AIC   BIC\n      <dbl>         <dbl> <dbl>     <dbl>       <dbl> <dbl>  <dbl> <dbl> <dbl>\n1     0.927         0.915  78.2      76.7 0.000000145     2  -85.0  178.  181.\n# ℹ 3 more variables: deviance <dbl>, df.residual <int>, nobs <int>\n```\n\n\n:::\n:::\n\n\n> $R^2$ of this model will be higher since it has an additional predictor.\n>\n> Volume and cover type explain approximately 93% of the variability in book weights.\n\n## Exercise 10\n\nWhich model is preferred for predicting book weights and why?\n\n> The second model, since it has a higher adjusted $R^2$.\n\n## Exercise 11\n\nUsing the model you chose, predict the weight of a hardcover book that is 1000 cubic centimeters (that is, roughly 25 centimeters in length, 20 centimeters in width, and 2 centimeters in height/thickness).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnew_book <- tibble(\n  cover = \"hb\",\n  volume = 1000\n)\n\npredict(weight_cover_fit, new_data = new_book)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 1\n  .pred\n  <dbl>\n1  916.\n```\n\n\n:::\n:::\n",
    "supporting": [
      "ae-07-books-sa_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}