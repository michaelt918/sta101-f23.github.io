{
  "hash": "b304bed1d5a13b00f9ee68db2a58ac19",
  "result": {
    "markdown": "---\ntitle: \"Intro to R and EDA\"\nsubtitle: \"STA 101\"\nformat: html\neditor: visual\n---\n\n\n## Bulletin\n\n-   first lab tomorrow, due following Thursday at 11:59pm on Gradescope\n-   be sure to complete prepare material (on the [schedule](https://sta101-fa22.netlify.app/static/schedule/schedule.html)) before each class\n\n## Today\n\nBy the end of today you will...\n\n-   practice using `glimpse()`, `names()`, `nrow()`, `ncol()`, `count()`\n-   define and compute various statistics\n-   begin to gain familiarity with `ggplot`\n\n## Getting started\n\nDownload this application exercise by pasting the code below into your **console** (bottom left of screen)\n\n    download.file(\"https://sta101-fa22.netlify.app/static/appex/ae2.qmd\",\n    destfile = \"ae2.qmd\")\n\n-   A note on navigating RStudio\n    -   Source code vs visual editor\n    -   code chunks and narrative\n    -   file system\n\n## Load packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n-   A package within a package...\n\nThe `tidyverse` package contains the `dplyr` and `ggplot` packages we will use today. `ggplot` contains functions for plotting data while `dplyr` contains tools to wrangle, manipulate and summarize data frames.\n\n## Load data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nflint = read_csv(\"https://sta101-fa22.netlify.app/static/appex/data/flint.csv\")\n```\n:::\n\n\n### Data dictionary\n\n-   `id`: sample ID number (identifies the home)\n-   `zip`: ZIP code in Flint of the sample's location\n-   `ward`: ward in Flint of the sample's location\n-   `draw`: which time point the water was sampled from\n-   `lead`: lead content in parts per billion\n\n\n## Goal\n\nWe want to learn about the **population** using a **sample**.\n\nIn the case we want to learn about the lead content in all of Flint, MI homes but only have available water readings from a sample of homes (our data set).\n\n#### Exercise 1:\n\nLook at the data, how many observations are there? How many variables?\n\n\\[answer here\\]  \n  \n  \n## Count\n\nLet's `count()` to find the number of different time points water was sampled.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount(flint, draw)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  draw       n\n  <chr>  <int>\n1 first    271\n2 second   271\n3 third    271\n```\n:::\n:::\n\nHow many unique homes are in the data set?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nflint %>%\n  count(id)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 269 × 2\n      id     n\n   <dbl> <int>\n 1     1     3\n 2     2     3\n 3     4     3\n 4     5     3\n 5     6     3\n 6     7     3\n 7     8     3\n 8     9     3\n 9    12     3\n10    13     3\n# ℹ 259 more rows\n```\n:::\n:::\n\n\n- A note on pipes `%>%` \n\n## Exercise 2 \n\nFill in the code to see how many samples were taken from each zip code. Uncomment the lines (i.e. remove the `#` before running the code)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# flint %>% \n # count(______)\n```\n:::\n\n\nWhich ZIP code had the most samples drawn?\n\n\n## Statistics\n\nWhat is a statistic? It's **any mathematical function of the data**. Sometimes, a statistic is referred to as \"sample statistic\" since you compute it from a **sample** (the data) and not the entire **population**.\n\n#### measure of central tendency:\n\n-   mean\n-   median\n-   mode\n\n#### measures of spread:\n\n- variance\n- standard deviation\n- range\n- quartiles\n- inter-quartile range (IQR)\n\n#### order statistics:\n\n-   quantiles\n-   minimum (0 percentile)\n-   median (50th percentile)\n-   maximum (100 percentile)\n\n... and any other arbitrary function of the data you can come up with!\n\n#### Exercise 3:\n\nCome up with your own statistic and write it in the narrative here.\n\nTo access a column of the data, we'll use `data$column`.\n\nLet's compute each of these statistics for `lead` ppb in `R`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# code here\n```\n:::\n\n\n\n## Plotting\n\nLet's take a look at the **distribution** of lead content in homes in Flint, MI.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nflint %>% # data\n  ggplot(aes(x = lead)) + # columns we want to look at\n  geom_histogram() # geometry of the visualization\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](ae2_files/figure-html/flint-histogram-1-1.png){width=672}\n:::\n:::\n\n\n\nWe can make this plot look nicer by adjusting the number of bins and/or the x-axis.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nflint %>% # data\n  ggplot(aes(x = lead)) + # columns we want to look at\n  geom_histogram(bins = 50) + # geometry of the visualization\n  xlim(0, 100) # limit the x-axis to a certain range\n```\n\n::: {.cell-output-display}\n![](ae2_files/figure-html/flint-histogram-2-1.png){width=672}\n:::\n:::\n\n\nLet's visualize some of our summary statistics on the plot.\n\n#### Exercise 4:\n\nUn-comment the code below and fill in the blank with the mean.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nflint %>% \n  ggplot(aes(x = lead)) + \n  geom_histogram(bins = 50) + \n  xlim(0,100) #+\n  #geom_vline(xintercept = __, color = 'red')\n```\n:::\n\n\nAdd another `geom_vline` with the median. Use a separate color.\n\n\n## Box plots\n\nLet’s make some plots, where we will focus on zip codes 48503, 48504, 48505, 48506, and 48507. We will restrict our attention to samples with lead values less than 1,000 ppb.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nflint_focus <- flint %>% \n  filter(zip %in% 48503:48507, lead < 1000)\n```\n:::\n\n\nBelow are side-by-side box plots for the three flushing times in each of the five zip codes we considered. Add `x` and `y` labels; add a title by inserting `title = \"title_name\"` inside the `labs()` function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = flint_focus, aes(x = factor(zip), y = lead)) +\n  geom_boxplot(aes(fill = factor(draw))) +\n  labs(x = \"--------\", y = \"--------\", fill = \"Flushing time\") +\n  scale_fill_discrete(breaks = c(\"first\", \"second\", \"third\"),\n                      labels = c(\"0 (sec)\", \"45 (sec)\", \"120 (sec)\")) +\n  coord_flip() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](ae2_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\nAdd labels for `x`, `y`, a `title`, and `subtitle` to the code below to update the corresponding plot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = flint_focus, aes(x = factor(zip), y = lead)) +\n  geom_boxplot(aes(fill = factor(draw))) + \n  labs(x = \"--------\", y = \"--------\", fill = \"Flushing time\",\n       subtitle = \"--------\") +\n  scale_fill_discrete(breaks = c(\"first\", \"second\", \"third\"),\n                      labels = c(\"0 (sec)\", \"45 (sec)\", \"120 (sec)\")) +\n  coord_flip(ylim = c(0, 50)) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](ae2_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nWhat is the difference between the two plots? What are the advantages and disadvantages to each plot? \n\n## References\n\n1. Langkjaer-Bain, R. (2017). The murky tale of Flint’s deceptive water data. Significance, 14: 16-21.\n\n2. Kelsey J. Pieper, Rebekah Martin, Min Tang, LeeAnne Walters, Jeffrey Parks, Siddhartha Roy, Christina Devine, and Marc A. Edwards\nEnvironmental Science & Technology 2018 52 (15), 8124-8132\nDOI: 10.1021/acs.est.8b00791 ",
    "supporting": [
      "ae2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}